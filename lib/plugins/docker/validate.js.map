{"version":3,"sources":["../../../src/plugins/docker/validate.js"],"names":["swarmSchema","joi","object","keys","enabled","bool","required","labels","array","items","name","string","value","servers","registrySchema","host","imagePrefix","username","password","validateSwarm","config","addLocation","VALIDATE_OPTIONS","combineErrorDetails","details","validate","swarm","validateRegistry","privateDockerRegistry"],"mappings":";;;;;;;;AAAA;;;;AAEA,MAAMA,WAAW,GAAGC,aAAIC,MAAJ,GAAaC,IAAb,CAAkB;AACpCC,EAAAA,OAAO,EAAEH,aAAII,IAAJ,GAAWC,QAAX,EAD2B;AAEpCC,EAAAA,MAAM,EAAEN,aAAIO,KAAJ,GAAYC,KAAZ,CAAkBR,aAAIC,MAAJ,GAAaC,IAAb,CAAkB;AAC1CO,IAAAA,IAAI,EAAET,aAAIU,MAAJ,GAAaL,QAAb,EADoC;AAE1CM,IAAAA,KAAK,EAAEX,aAAIU,MAAJ,GAAaL,QAAb,EAFmC;AAG1CO,IAAAA,OAAO,EAAEZ,aAAIO,KAAJ,GAAYC,KAAZ,CAAkBR,aAAIU,MAAJ,EAAlB;AAHiC,GAAlB,CAAlB;AAF4B,CAAlB,CAApB;;AASA,MAAMG,cAAc,GAAGb,aAAIC,MAAJ,GAAaC,IAAb,CAAkB;AACvCY,EAAAA,IAAI,EAAEd,aAAIU,MAAJ,GAAaL,QAAb,EADiC;AAEvCU,EAAAA,WAAW,EAAEf,aAAIU,MAAJ,EAF0B;AAGvCM,EAAAA,QAAQ,EAAEhB,aAAIU,MAAJ,EAH6B;AAIvCO,EAAAA,QAAQ,EAAEjB,aAAIU,MAAJ;AAJ6B,CAAlB,CAAvB;;AAOO,SAASQ,aAAT,CACLC,MADK,EAEL;AACEC,EAAAA,WADF;AAEEC,EAAAA,gBAFF;AAGEC,EAAAA;AAHF,CAFK,EAOL;AACA,MAAIC,OAAO,GAAG,EAAd;AAEAA,EAAAA,OAAO,GAAGD,mBAAmB,CAC3BC,OAD2B,EAE3BvB,aAAIwB,QAAJ,CAAaL,MAAM,CAACM,KAApB,EAA2B1B,WAA3B,EAAwCsB,gBAAxC,CAF2B,CAA7B;AAKA,SAAOD,WAAW,CAACG,OAAD,EAAU,OAAV,CAAlB;AACD;;AAEM,SAASG,gBAAT,CACLP,MADK,EAEL;AACEC,EAAAA,WADF;AAEEC,EAAAA,gBAFF;AAGEC,EAAAA;AAHF,CAFK,EAOL;AACA,MAAIC,OAAO,GAAG,EAAd;AACAA,EAAAA,OAAO,GAAGD,mBAAmB,CAC3BC,OAD2B,EAE3BvB,aAAIwB,QAAJ,CAAaL,MAAM,CAACQ,qBAApB,EAA2Cd,cAA3C,EAA2DQ,gBAA3D,CAF2B,CAA7B;AAKA,SAAOD,WAAW,CAACG,OAAD,EAAU,uBAAV,CAAlB;AACD","sourcesContent":["import joi from '@hapi/joi';\n\nconst swarmSchema = joi.object().keys({\n  enabled: joi.bool().required(),\n  labels: joi.array().items(joi.object().keys({\n    name: joi.string().required(),\n    value: joi.string().required(),\n    servers: joi.array().items(joi.string())\n  }))\n});\n\nconst registrySchema = joi.object().keys({\n  host: joi.string().required(),\n  imagePrefix: joi.string(),\n  username: joi.string(),\n  password: joi.string()\n});\n\nexport function validateSwarm(\n  config,\n  {\n    addLocation,\n    VALIDATE_OPTIONS,\n    combineErrorDetails\n  }\n) {\n  let details = [];\n\n  details = combineErrorDetails(\n    details,\n    joi.validate(config.swarm, swarmSchema, VALIDATE_OPTIONS)\n  );\n\n  return addLocation(details, 'swarm');\n}\n\nexport function validateRegistry(\n  config,\n  {\n    addLocation,\n    VALIDATE_OPTIONS,\n    combineErrorDetails\n  }\n) {\n  let details = [];\n  details = combineErrorDetails(\n    details,\n    joi.validate(config.privateDockerRegistry, registrySchema, VALIDATE_OPTIONS)\n  );\n\n  return addLocation(details, 'dockerPrivateRegistry');\n}\n"],"file":"validate.js"}