{"version":3,"sources":["../../../src/plugins/docker/index.js"],"names":["description","commands","_commands","hooks","api","runCommand","validate","swarm","validateSwarm","privateDockerRegistry","validateRegistry","swarmOptions","config","labels","scrubConfig","username","password"],"mappings":";;;;;;;;;AAAA;;AACA;;;;;;AAEO,MAAMA,WAAW,GAAG,yBAApB;;AACA,MAAMC,QAAQ,GAAGC,SAAjB;;AAEA,MAAMC,KAAK,GAAG;AACnB,wBAAsBC,GAAtB,EAA2B;AACzB,WAAOA,GAAG,CAACC,UAAJ,CAAe,eAAf,CAAP;AACD;;AAHkB,CAAd;;AAMA,MAAMC,QAAQ,GAAG;AACtBC,EAAAA,KAAK,EAAEC,uBADe;AAEtBC,EAAAA,qBAAqB,EAAEC;AAFD,CAAjB;;;AAKA,SAASC,YAAT,CAAsBC,MAAtB,EAA8B;AACnC,MAAIA,MAAM,IAAIA,MAAM,CAACL,KAArB,EAA4B;AAC1B,WAAO;AACLM,MAAAA,MAAM,EAAED,MAAM,CAACL,KAAP,CAAaM,MAAb,IAAuB;AAD1B,KAAP;AAGD;AACF;;AAEM,SAASC,WAAT,CAAqBF,MAArB,EAA6B;AAClC,MAAI,CAACA,MAAM,CAACH,qBAAZ,EAAmC;AACjC,WAAOG,MAAP;AACD;;AAED,QAAM;AACJG,IAAAA,QADI;AAEJC,IAAAA;AAFI,MAGFJ,MAAM,CAACH,qBAHX;;AAKA,MAAIM,QAAJ,EAAc;AACZH,IAAAA,MAAM,CAACH,qBAAP,CAA6BM,QAA7B,GAAwC,UAAxC;AACD;;AACD,MAAIC,QAAJ,EAAc;AACZJ,IAAAA,MAAM,CAACH,qBAAP,CAA6BO,QAA7B,GAAwC,UAAxC;AACD;;AAED,SAAOJ,MAAP;AACD","sourcesContent":["import * as _commands from './commands';\nimport { validateRegistry, validateSwarm } from './validate';\n\nexport const description = 'Setup and manage docker';\nexport const commands = _commands;\n\nexport const hooks = {\n  'post.default.status'(api) {\n    return api.runCommand('docker.status');\n  }\n};\n\nexport const validate = {\n  swarm: validateSwarm,\n  privateDockerRegistry: validateRegistry\n};\n\nexport function swarmOptions(config) {\n  if (config && config.swarm) {\n    return {\n      labels: config.swarm.labels || []\n    };\n  }\n}\n\nexport function scrubConfig(config) {\n  if (!config.privateDockerRegistry) {\n    return config;\n  }\n\n  const {\n    username,\n    password\n  } = config.privateDockerRegistry;\n\n  if (username) {\n    config.privateDockerRegistry.username = 'username';\n  }\n  if (password) {\n    config.privateDockerRegistry.password = 'password';\n  }\n\n  return config;\n}\n"],"file":"index.js"}